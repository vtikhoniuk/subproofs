{"version":3,"file":"convert-manifest-to-package.js","names":["path","createModuleGraph","Modules","readLocalProtos","readSystemProtos","readPackage","isReadableLocalFile","isRemotePath","resolveLocalFile","createPackageFromManifest","convertManifestToPackage","manifest","cwd","pkg","protoFiles","push","readImportedProtos","key","value","Object","entries","imports","imported","readImportedPackage","resolveImportedPackagePath","modules","meta","moduleMeta","packageIndex","BigInt","packageMeta","length","mod","binaryIndex","binaries","file","name","undefined","findIndex","inner","graph","module","initialBlock","startBlockFor","context","prefixImportedModules","prefix","index","input","inputs","case","moduleName","Error","output","system","protobuf","files","find","paths","Set","imp","importPaths","add","resolve","candidate","resolved","descriptor"],"sources":["../../../src/manifest/convert-manifest-to-package.ts"],"sourcesContent":[null],"mappings":"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"}