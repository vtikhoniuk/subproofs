{"version":3,"file":"convert-manifest-to-package.js","names":["path","_interopRequireWildcard","require","_core","_proto","_readLocalProtos","_readSystemProtos","_readPackage","_pathUtils","_createPackageFromManifest","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","default","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","prototype","hasOwnProperty","call","i","set","convertManifestToPackage","manifest","cwd","pkg","createPackageFromManifest","protoFiles","push","readImportedProtos","key","value","entries","imports","imported","readImportedPackage","resolveImportedPackagePath","modules","Modules","meta","moduleMeta","packageIndex","BigInt","packageMeta","length","mod","binaryIndex","binaries","file","name","undefined","findIndex","inner","graph","createModuleGraph","module","initialBlock","startBlockFor","context","isRemotePath","resolveLocalFile","readPackage","prefixImportedModules","prefix","index","input","inputs","case","moduleName","Error","output","system","readSystemProtos","protobuf","files","find","paths","Set","imp","importPaths","add","resolve","candidate","resolved","isReadableLocalFile","descriptor","readLocalProtos"],"sources":["../../../src/manifest/convert-manifest-to-package.ts"],"sourcesContent":[null],"mappings":"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"}